<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lucian.lucian_blog.dao.PostDao">

    <select id="queryConditionsByPage" resultType="com.lucian.lucian_blog.bean.bo.PostBO">
        select p.*, ca.id as ca_id, ca.name as ca_name, t.id as tag_id, t.name as tag_name
        from posts p
                 left join post_categories pc on p.id = pc.post_id and pc.deleted_at is null
                 left join categories ca on pc.category_id = ca.id and ca.deleted_at is null
                 left join post_tags pt on pc.post_id = pt.post_id and pt.deleted_at is null
                 left join tags t on pt.tag_id = t.id and t.deleted_at is null
        where p.deleted_at is null ${wrapper.customSqlSegment}
    </select>
</mapper>